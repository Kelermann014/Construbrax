<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gestão de Empréstimos - CONSTRUBRAX</title>
  
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

  <nav class="top-menu">
    <button id="btn-abrir-cadastro-cliente">Novo Cliente</button>
    <button id="btn-gerenciar-fiadores">Gerenciar Fiadores</button>
    <button id="btn-abrir-simulacao">Novo Empréstimo</button>
  </nav>

  <main class="container">
    <h2>CONSTRUBRAX</h2>

    <section class="filtros">
      <button id="filtro-todos" data-filtro="todos" class="filtro-btn ativo">Todos</button>
      <button id="filtro-em-dia" data-filtro="em-dia" class="filtro-btn">Em dia</button>
      <button id="filtro-atrasados" data-filtro="atrasado" class="filtro-btn">Atrasados</button>
      <button id="filtro-a-vencer" data-filtro="a-vencer" class="filtro-btn">A vencer</button>
      <button id="filtro-quitados" data-filtro="quitado" class="filtro-btn">Quitados</button>
      <input type="text" id="pesquisaCliente" placeholder="Pesquisar por cliente..." />
    </section>

    <section class="cards-dashboard">
      <div class="card"><h3>Total de Clientes</h3><p id="totalClientes">0</p></div>
      <div class="card"><h3>Total a Receber</h3><p id="totalReceber">R$ 0,00</p></div>
      <div class="card"><h3>Quantidade de Cidades</h3><p id="totalCidades">0</p></div>
      <div class="card"><h3>Total de Empréstimos</h3><p id="totalEmprestimos">0</p></div>
    </section>

    <section class="graficos-grid">
      <div><canvas id="graficoStatus"></canvas></div>
      <div><canvas id="graficoMensal"></canvas></div>
    </section>

    <section>
      <table class="tabela-principal">
        <thead>
          <tr>
            <th data-label="Cliente">Cliente</th>
            <th data-label="Valor Total">Valor Total</th>
            <th data-label="Parcelas">Parcelas</th>
            <th data-label="Status">Status</th>
            <th data-label="Ações">Ações</th>
          </tr>
        </thead>
        <tbody id="tabelaEmprestimos"></tbody>
      </table>
    </section>
  </main>

  <div id="modalCadastroCliente" class="modal">
    <div class="modal-content">
      <span class="close" data-modal-id="modalCadastroCliente">&times;</span>
      <h3 id="tituloModalCliente">Cadastro de Cliente</h3>
      <input type="hidden" id="idClienteEditar" />
      <div class="form-grid">
        <div class="form-group span-4"><input type="text" id="nomeCliente" placeholder="Nome do Cliente" /><div class="mensagem-erro" id="erro-nomeCliente"></div></div>
        <div class="form-group span-2"><input type="text" id="cpfCliente" placeholder="CPF" data-mascara="cpf" maxlength="14" /><div class="mensagem-erro" id="erro-cpfCliente"></div></div>
        <div class="form-group span-2"><input type="text" id="rgCliente" placeholder="RG" data-mascara="rg" maxlength="12" /><div class="mensagem-erro" id="erro-rgCliente"></div></div>
        <div class="form-group span-2"><input type="text" id="telefoneCliente" placeholder="Telefone" data-mascara="telefone" maxlength="15" /><div class="mensagem-erro" id="erro-telefoneCliente"></div></div>
        <div class="form-group span-2"><input type="text" id="profissaoCliente" placeholder="Profissão" /><div class="mensagem-erro" id="erro-profissaoCliente"></div></div>
        <div class="form-group span-1"><input type="text" id="cepCliente" placeholder="CEP" data-mascara="cep" maxlength="9" /><div class="mensagem-erro" id="erro-cepCliente"></div></div>
        <div class="form-group span-3"><input type="text" id="ruaCliente" placeholder="Rua" /><div class="mensagem-erro" id="erro-ruaCliente"></div></div>
        <div class="form-group span-1"><input type="text" id="numeroCliente" placeholder="Número" /><div class="mensagem-erro" id="erro-numeroCliente"></div></div>
        <div class="form-group span-3"><input type="text" id="bairroCliente" placeholder="Bairro" /><div class="mensagem-erro" id="erro-bairroCliente"></div></div>
        <div class="form-group span-2"><input type="text" id="cidadeCliente" placeholder="Cidade" /><div class="mensagem-erro" id="erro-cidadeCliente"></div></div>
        <div class="form-group span-2"><input type="text" id="estadoCliente" placeholder="Estado" maxlength="2" /><div class="mensagem-erro" id="erro-estadoCliente"></div></div>
        <div class="form-group span-4"><input type="text" id="complementoCliente" placeholder="Complemento" /><div class="mensagem-erro" id="erro-complementoCliente"></div></div>
      </div>
      <button id="btn-salvar-cliente">Salvar</button>
    </div>
  </div>

  <div id="modalCadastroFiador" class="modal">
    <div class="modal-content">
      <span class="close" data-modal-id="modalCadastroFiador">&times;</span>
      <h3 id="tituloModalFiador">Cadastro de Fiador</h3>
      <input type="hidden" id="idFiadorEditar" />
       <div class="form-grid">
        <div class="form-group span-4"><input type="text" id="nomeFiador" placeholder="Nome do Fiador" /><div class="mensagem-erro" id="erro-nomeFiador"></div></div>
        <div class="form-group span-2"><input type="text" id="cpfFiador" placeholder="CPF" data-mascara="cpf" maxlength="14"/><div class="mensagem-erro" id="erro-cpfFiador"></div></div>
        <div class="form-group span-2"><input type="text" id="rgFiador" placeholder="RG" data-mascara="rg" maxlength="12"/><div class="mensagem-erro" id="erro-rgFiador"></div></div>
        <div class="form-group span-4"><input type="text" id="telefoneFiador" placeholder="Telefone" data-mascara="telefone" maxlength="15"/><div class="mensagem-erro" id="erro-telefoneFiador"></div></div>
        <div class="form-group span-1"><input type="text" id="cepFiador" placeholder="CEP" data-mascara="cep" maxlength="9"/><div class="mensagem-erro" id="erro-cepFiador"></div></div>
        <div class="form-group span-3"><input type="text" id="ruaFiador" placeholder="Rua"/><div class="mensagem-erro" id="erro-ruaFiador"></div></div>
        <div class="form-group span-1"><input type="text" id="numeroFiador" placeholder="Número"/><div class="mensagem-erro" id="erro-numeroFiador"></div></div>
        <div class="form-group span-3"><input type="text" id="bairroFiador" placeholder="Bairro"/><div class="mensagem-erro" id="erro-bairroFiador"></div></div>
        <div class="form-group span-2"><input type="text" id="cidadeFiador" placeholder="Cidade"/><div class="mensagem-erro" id="erro-cidadeFiador"></div></div>
        <div class="form-group span-2"><input type="text" id="estadoFiador" placeholder="Estado" maxlength="2"/><div class="mensagem-erro" id="erro-estadoFiador"></div></div>
        <div class="form-group span-4"><input type="text" id="complementoFiador" placeholder="Complemento"/><div class="mensagem-erro" id="erro-complementoFiador"></div></div>
      </div>
      <button id="btn-salvar-fiador">Salvar Fiador</button>
    </div>
  </div>
  
  <div id="modalGerenciarFiadores" class="modal">
    <div class="modal-content-largo">
      <span class="close" data-modal-id="modalGerenciarFiadores">&times;</span>
      <h3>Gerenciar Fiadores</h3>
      <div class="tabela-rolavel" style="max-height: 500px;">
        <table>
            <thead>
                <tr><th>Nome do Fiador</th><th>CPF</th><th>Telefone</th><th>Ações</th></tr>
            </thead>
            <tbody id="tabelaGerenciarFiadores"></tbody>
        </table>
      </div>
    </div>
  </div>

  <div id="modalSimulacao" class="modal">
    <div class="modal-content" style="max-width: 800px;">
      <span class="close" data-modal-id="modalSimulacao">&times;</span>
      <h3>Simulação e Realização de Empréstimo</h3>
      <div class="form-grid">
        <div class="form-group span-2">
            <label for="clienteSimulacao">Cliente:</label>
            <select id="clienteSimulacao"></select>
        </div>
        <div class="form-group span-2">
            <div class="label-com-botao">
                <label for="fiadorSimulacao">Fiador:</label>
                <button id="btn-abrir-cadastro-fiador-simulacao" class="btn-link">Novo Fiador</button>
            </div>
            <select id="fiadorSimulacao"></select>
        </div>
        <div class="form-group span-1"><label for="valorEmprestimo">Valor do Empréstimo</label><input type="number" id="valorEmprestimo" placeholder="R$ 0,00" /></div>
        <div class="form-group span-1"><label for="jurosEmprestimo">Juros (% a.m.)</label><input type="number" id="jurosEmprestimo" placeholder="Ex: 3.5" step="0.01" min="0" /></div>
        <div class="form-group span-1"><label for="parcelasEmprestimo">Nº de Parcelas</label><input type="number" id="parcelasEmprestimo" placeholder="Ex: 12" /></div>
        <div class="form-group span-1"><label for="vencimentoEmprestimo">1º Vencimento</label><input type="date" id="vencimentoEmprestimo" /></div>
        <div class="span-4"><label for="resultadoSimulacao">Resultado da Simulação:</label><textarea id="resultadoSimulacao" readonly></textarea></div>
      </div>
      <div class="botoes-simulacao"><button id="btn-simular">Simular</button><button id="btn-realizar-emprestimo">Realizar Empréstimo</button></div>
    </div>
  </div>

  <div id="modalDetalhesEmprestimo" class="modal">
    <div class="modal-content-largo"><span class="close" data-modal-id="modalDetalhesEmprestimo">&times;</span><h3>Detalhes do Empréstimo</h3><div id="detalhesEmprestimoConteudo"></div><button id="btn-imprimir-contrato">Imprimir Contrato</button></div>
  </div>

  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="dados.js"></script>
  <script src="script-validacao.js"></script>
  <script src="script-cadastro.js"></script>
  <script src="script-fiador.js"></script>
  <script src="script-simulacao.js"></script>
  <script src="script-dashboard.js"></script>
  <script src="script-contrato.js"></script>
  <script src="script.js"></script>
</body>
</html>